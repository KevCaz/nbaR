<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>nbaR: R access to the Netherlands Biodiversity API • nbaR</title>
<link rel="shortcut icon" type="image/x-icon" href="../favicon.ico">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.1/clipboard.min.js" integrity="sha256-hIvIxeqhGZF+VVeM55k0mJvWpQ6gTkWk3Emc+NmowYA=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="nbaR: R access to the Netherlands Biodiversity API">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">nbaR</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/nbaR.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Documentation
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/apiclient.html">Advanced queries</a>
    </li>
    <li>
      <a href="../articles/services.html">Services summary</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Example Workflows
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/sharks.html">Calibrating a molecular phylogeny of the sharks</a>
    </li>
    <li>
      <a href="../articles/tomato.html">The oldest tomato specimen in the world</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/apiclient.html">nbaR API client: concepts and object model</a>
    </li>
    <li>
      <a href="../articles/services.html">nbaR services examples</a>
    </li>
    <li>
      <a href="../articles/sharks.html">Calibrating a molecular phylogeny of the sharks</a>
    </li>
    <li>
      <a href="../articles/tomato.html">The oldest tomato specimen in the world</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/naturalis/nbaR">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>nbaR: R access to the Netherlands Biodiversity API</h1>
            
            <h4 class="date">Mar 07, 2019</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/naturalis/nbaR/blob/master/vignettes/nbaR.Rmd"><code>vignettes/nbaR.Rmd</code></a></small>
      <div class="hidden name"><code>nbaR.Rmd</code></div>

    </div>

    
    
<div id="background" class="section level1">
<h1 class="hasAnchor">
<a href="#background" class="anchor"></a>Background</h1>
<div id="the-netherlands-biodiversity-api" class="section level2">
<h2 class="hasAnchor">
<a href="#the-netherlands-biodiversity-api" class="anchor"></a>The Netherlands Biodiversity API</h2>
<p>The Netherlands Biodiversity API (NBA) facilitates access to the Natural History Collection at Naturalis Biodiversity Center. Next to museum specimen records and metadata, access to taxonomic classification and nomenclature, to geographical information, and to multimedia files is provided. By using the powerful Elasticsearch engine, the NBA facilitates searching for collection- and biodiversity data in near real-time. Furthermore, by incorporating information from taxonomic databases, taxonomic name resolution can be accomplished with the NBA. Persistent Uniform Resource Identifiers (PURLs) ensure that each specimen accessible via the NBA is represented by a citeable unambiguous web reference. Access to our data is provided via a RESTful interface and several clients such as the <a href="http://bioportal.naturalis.nl/">BioPortal</a>, a web application for browsing biodiversity data that is served by the NBA. For more information about the NBA, please see our <a href="http://docs.biodiversitydata.nl/">detailed documentation</a>.</p>
</div>
<div id="r-access" class="section level2">
<h2 class="hasAnchor">
<a href="#r-access" class="anchor"></a>R access</h2>
<p>The R programming language is established as a common tool in scientific research, with growing adoption by researchers in biodiversity research. Hence, to ease the access to the NBA for researchers, we developed this R client.</p>
</div>
</div>
<div id="full-client-vs-wrapper-functions" class="section level1">
<h1 class="hasAnchor">
<a href="#full-client-vs-wrapper-functions" class="anchor"></a>Full client vs wrapper functions</h1>
<p>nbaR aims to be a <em>full</em> client of the NBA API, meaning that it implements all endpoints and the entire NBA object model. The client thus facilitates all API queries possible. Complex objects returned by the API, such as <code>Specimen</code> or <code>Taxon</code> objects are implemented as <code>R6</code> classes. This includes also objects used for querying (<code>QuerySpec</code> and <code>QueryCondition</code>, respectively, see also <a href="apiclient.html">here</a>).</p>
<p>For for many queries, the full functionality of the NBA won’t be required. The package therefore offers a <strong>wrapper function</strong> for each endpoint that does not use <code>R6</code> classes but common R data structes, such as <code>list</code> and <code>data.frame</code>. However, querying capabilities are limited for these wrappers. Below we will show how to set up some simple queries using the wrapper functions.</p>
</div>
<div id="getting-started-query-with-wrapper-functions" class="section level1">
<h1 class="hasAnchor">
<a href="#getting-started-query-with-wrapper-functions" class="anchor"></a>Getting started: query with wrapper functions</h1>
<p>The data in the NBA consists of four main data types (see <a href="http://docs.biodiversitydata.nl/">NBA docs</a>):</p>
<ul>
<li>Specimen</li>
<li>Taxon</li>
<li>Multimedia</li>
<li>Geo</li>
</ul>
<p>Wrapper functions start with the data type (lower-case letter) and an underscore (<code>specimen_*</code>, <code>taxon_*</code>) etc. There is a wrapper function for each endpoint (see <a href="https://docs.biodiversitydata.nl/endpoints-reference/">here</a> for all endpoints); camelCase naming is replaced by snake_case. The endpoint <code>getDistinctValues</code> for specimen data, for instance, is called by the function <code>specimen_get_distinct_values</code>.</p>
<div id="searching-for-specimen-records" class="section level2">
<h2 class="hasAnchor">
<a href="#searching-for-specimen-records" class="anchor"></a>Searching for specimen records</h2>
<p>Suppose we want to look up specimens of the genus <em>Mola</em> (sunfish). To find out what field of the NBA we could query, we can use the function <code><a href="../reference/specimen_get_paths.html">specimen_get_paths()</a></code> (see <code><a href="../reference/specimen_get_paths.html">?specimen_get_paths</a></code> for documentation).</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">library</span>(<span class="st">'nbaR'</span>)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"></a>
<a class="sourceLine" id="cb1-3" data-line-number="3">all_paths &lt;-<span class="st"> </span><span class="kw"><a href="../reference/specimen_get_paths.html">specimen_get_paths</a></span>()</a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="kw">head</span>(all_paths)</a></code></pre></div>
<pre><code>## [1] "sourceSystem.code" "sourceSystem.name" "sourceSystemId"   
## [4] "recordURI"         "unitID"            "unitGUID"</code></pre>
<p>Note that paths of nested objects are seperated via a <code>.</code>. To search for a specific genus, we can query the field <code>identifications.scientificName.genusOrMonomial</code>. The <code>specimen_query</code> method lets us query for a specific field, where the query parameters are given as a list:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">queryParams &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="st">"identifications.scientificName.genusOrMonomial"</span> =</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="st">                        "Mola"</span>)</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">specimens &lt;-<span class="st"> </span><span class="kw"><a href="../reference/specimen_query.html">specimen_query</a></span>(queryParams)</a></code></pre></div>
<pre><code>## Warning in (function (..., deparse.level = 1) : number of columns of result
## is not a multiple of vector length (arg 1)</code></pre>
<p>Return type can either be <code>list</code> or <code>data.frame</code> (the default). Note that nested structures in the data frame are represented as list columns. N</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#background">Background</a><ul class="nav nav-pills nav-stacked">
<li><a href="#the-netherlands-biodiversity-api">The Netherlands Biodiversity API</a></li>
      <li><a href="#r-access">R access</a></li>
      </ul>
</li>
      <li><a href="#full-client-vs-wrapper-functions">Full client vs wrapper functions</a></li>
      <li>
<a href="#getting-started-query-with-wrapper-functions">Getting started: query with wrapper functions</a><ul class="nav nav-pills nav-stacked">
<li><a href="#searching-for-specimen-records">Searching for specimen records</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Hannes Hettling, Rutger Vos.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
